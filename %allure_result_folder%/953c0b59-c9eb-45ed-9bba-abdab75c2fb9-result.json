{"name": "test_smoke", "status": "broken", "statusDetails": {"message": "Exception: Не удалось кликнуть по элементу ('xpath', '//*[@id=\"tippy-1\"]/div/div/div/div/button[1]') после 3 попыток", "trace": "set_up = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"8fa65ebeb30137b94eab50731f3753c5\")>\n\n    @allure.description(\"Прохождение бизнес пути покупки книги\")\n    def test_smoke(set_up):\n    \n        mp = Main_page(set_up)  # Передаем драйвер из фикстуры\n>       mp.main_page_actions()\n\ntest/test_smoke.py:12: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\npages/main_page.py:56: in main_page_actions\n    self.click_yes_im_here()\npages/main_page.py:39: in click_yes_im_here\n    self.safe_click((By.XPATH, self.Yes_Im_here))\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.main_page.Main_page object at 0x106f0c1a0>\nlocator = ('xpath', '//*[@id=\"tippy-1\"]/div/div/div/div/button[1]'), timeout = 20, retries = 3\n\n    def safe_click(self, locator, timeout=20, retries=3):\n        \"\"\"\n        Универсальный метод для безопасного клика с обработкой Stale Element\n        \"\"\"\n        for attempt in range(retries):\n            try:\n                # Всегда ищем элемент заново для избежания Stale Element\n                element = WebDriverWait(self.driver, timeout).until(\n                    EC.element_to_be_clickable(locator)\n                )\n    \n                # Дополнительная проверка видимости элемента\n                if not element.is_displayed():\n                    self.driver.execute_script(\"arguments[0].scrollIntoView(true);\", element)\n                    time.sleep(1)\n    \n                # Попытка клика\n                element.click()\n                return True\n    \n            except StaleElementReferenceException:\n                print(f\"Stale element, повторный поиск элемента {locator}, попытка {attempt + 1}/{retries}\")\n                # При Stale Element просто переходим к следующей попытке\n    \n            except ElementClickInterceptedException:\n                try:\n                    # JavaScript клик при перекрытии элемента\n                    element = WebDriverWait(self.driver, 5).until(\n                        EC.presence_of_element_located(locator)\n                    )\n                    self.driver.execute_script(\"arguments[0].click();\", element)\n                    return True\n                except Exception:\n                    pass\n    \n            except TimeoutException:\n                print(f\"Элемент {locator} не найден, попытка {attempt + 1}/{retries}\")\n                # Дополнительное ожидание загрузки страницы\n                time.sleep(2)\n    \n            except Exception as e:\n                print(f\"Ошибка при клике: {e}, попытка {attempt + 1}/{retries}\")\n    \n            if attempt < retries - 1:\n                time.sleep(2)\n    \n>       raise Exception(f\"Не удалось кликнуть по элементу {locator} после {retries} попыток\")\nE       Exception: Не удалось кликнуть по элементу ('xpath', '//*[@id=\"tippy-1\"]/div/div/div/div/button[1]') после 3 попыток\n\nbase/base_class.py:88: Exception"}, "description": "Прохождение бизнес пути покупки книги", "steps": [{"name": "Выбор каталога товаров", "status": "broken", "statusDetails": {"message": "Exception: Не удалось кликнуть по элементу ('xpath', '//*[@id=\"tippy-1\"]/div/div/div/div/button[1]') после 3 попыток\n", "trace": "  File \"/Users/dmitry/PycharmProjects/Selenium_final_homework1/pages/main_page.py\", line 56, in main_page_actions\n    self.click_yes_im_here()\n    ~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/Users/dmitry/PycharmProjects/Selenium_final_homework1/pages/main_page.py\", line 39, in click_yes_im_here\n    self.safe_click((By.XPATH, self.Yes_Im_here))\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/dmitry/PycharmProjects/Selenium_final_homework1/base/base_class.py\", line 88, in safe_click\n    raise Exception(f\"Не удалось кликнуть по элементу {locator} после {retries} попыток\")\n"}, "start": 1758801466330, "stop": 1758801475502}], "attachments": [{"name": "stdout", "source": "8c6bc528-ac79-4f2c-bd7d-835aad065dc6-attachment.txt", "type": "text/plain"}], "start": 1758801466330, "stop": 1758801475506, "uuid": "b7f13288-65fe-41b8-9022-dfe39201eaed", "historyId": "b034d4ecf1adfc167309a323704144b2", "testCaseId": "b034d4ecf1adfc167309a323704144b2", "fullName": "test.test_smoke#test_smoke", "labels": [{"name": "parentSuite", "value": "test"}, {"name": "suite", "value": "test_smoke"}, {"name": "host", "value": "MacBook-Air.local"}, {"name": "thread", "value": "50688-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test.test_smoke"}], "titlePath": ["test", "test_smoke.py"]}